<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
</head>
<body>
    <div id="demo_text" class="demo_text"></div>
<script type="text/javascript" src="./assets/mapdata/lib/jquery-3.3.1.min.js"></script>
<script type="text/javascript" src="./assets/mapdata/js/lnglat_transformation.js"></script>
<script type="text/javascript" src="./data.js"></script>
<script>
    //墨卡托转经纬度
    function _getLngLat(poi){
        var lnglat = [];
        lnglat[0] = poi[0]/20037508.34*180;
        var mmy = poi[1]/20037508.34*180;
        lnglat[1] = 180/Math.PI*(2*Math.atan(Math.exp(mmy*Math.PI/180))-Math.PI/2);
        return lnglat;
    }
    var new_data = [];
    var timeLine = ["00:00", "01:00", "02:00", "03:00", "04:00", "05:00", "06:00", "07:00",
                "08:00", "09:00", "10:00", "11:00", "12:00", "13:00", "14:00", "15:00",
                "16:00", "17:00", "18:00", "19:00", "20:00", "21:00", "22:00", "23:00"];
    // for(var i = 0; i < timeLine.length; i++){
    //     var time_item = timeLine[i];
    //     var time_data = [];
    //     for(var j = 0; j < data.features.length; j++){
    //         var item = data.features[j].properties;
    //         time_data.push({
    //             lnglat: wgs84togcj02(item.LON, item.LAT),
    //             count: item[time_item]
    //         })
    //     }
    //     new_data[time_item] = time_data
    // }
    //geojson
    // for(var i = 0; i < data.features.length; i++){
    //     var format_lnglat = [];
    //     var items = data.features[i];
    //     // for(var j = 0; j < items.geometry.coordinates[0].length; j++){
    //         // var lnglat_item = _getLngLat(items.geometry.coordinates[0][j]);
    //         var lnglat_item = items.geometry.coordinates;
    //         format_lnglat.push(wgs84togcj02(lnglat_item[0], lnglat_item[1]))
    //     // }
    //     new_data.push({
    //         properties:items.properties,
    //         lnglat:format_lnglat
    //     })
    // }

    //excel
    for(var i = 0; i < data["00:00"].length; i++){
        var items = data["00:00"][i];
        new_data.push(items.count)
        // new_data.push({
        //     properties:items,
        //     lnglat:wgs84togcj02(items.lng, items.lat)
        // })
    }
    $("#demo_text").html(JSON.stringify(new_data))
</script>
</body>
</html>